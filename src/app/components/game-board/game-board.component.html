<div class="state-msg" *ngIf="state.msg" role="dialog" aria-labelledby="state-msg-text">
  <h2 id="state-msg-text" class="state-msg-text">{{ state.msg }}</h2>
</div>


<table class="game-board" [ngClass]="gameState === 0 ? '' : gameState === 1 ? 'won' : 'lost'">
  <thead>
    <tr>
      <td></td>
      <th *ngFor="let label of axesLabels.x" class="game-board-axes">{{label}}</th>
    </tr>
  </thead>

  <tbody>
    <tr class="game-board-row" *ngFor="let row of counter(data.amountOfRows); trackBy: trackByFn; index as rowI">
      <th class="game-board-axes">{{axesLabels.y[rowI]}}</th>

      <ng-container *ngFor="let square of boardSquaresArr; index as squareI">
        <td *ngIf="squareI | matrixPipe : rowI : data.squaresPerRow" class="game-board-row-square">

          <button (click)="!square.isClicked && squareClicked(squareI, square.shipId, square.shipSize)"
            [disabled]="gameState !== 0" class="game-board-row-square-btn"
            [ngClass]="{'ship': square.isShip, 'clicked': square.isClicked}" [attr.aria-disabled]="square.isClicked"
            [attr.aria-label]="square.isClicked ? (square.isShip ? 'ship clicked' : 'square clicked') : ''">

            <ng-container *ngIf="gameState === 0 && square.isFirstSquareOfShip && !square.isShipSunk">
              <img class="ship-img" *ngIf="square.shipSize <= 2; else largeShip"
                [ngClass]="square.shipSize === 1 ? 'small': 'medium'" [style.width]=" 95 * square.shipSize + '%'"
                src="./assets/{{square.shipSize === 1 ? 'xs_submarine.png' :'small_submarine.svg'}}" alt="ship icon">

              <ng-template #largeShip>
                <img class="ship-img" [style.width]="100 * square.shipSize + '%'"
                  src="./assets/{{square.shipSize <= 5 ? 'medium' : 'large'}}_submarine.svg" alt="ship icon">
              </ng-template>
            </ng-container>

            <img class="boom-img" *ngIf="gameState === 0 && square.isShip && square.isClicked;" src="./assets/boom.png"
              alt="boom icon">
          </button>
        </td>
      </ng-container>

    </tr>
  </tbody>
</table>


<div class="progress-board">
  <table class="progress-board-table">
    <thead class="progress-board-table-head">
      <tr>
        <th></th>
        <th class="progress-board-table-header">Ships State</th>
        <th></th>
      </tr>
      <tr>
        <th>Size</th>
        <th>Amount</th>
        <th>Sunk</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let ship of shipsAmountsList; index as shipSize">
        <tr *ngIf="ship.onBoard" [ngClass]="{'line-through': ship.onBoard === ship.sunk}">
          <td>{{shipSize}}</td>
          <td>{{ship.onBoard}}</td>
          <td>{{ship.sunk}}</td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>